# Setup Guide for Performing Malware Analysis

## Introduction
First things first, **NEVER run malware on your main machine.**

Malware is unpredictable. It can encrypt files or even steal our data. Many people out there unknowingly install malicious programs without giving them a second thought. **I have made that mistake too**. But we learn from it. It is time to **study how malware works**, in a safe and controlled environment.

In this guide, I will walk you through how to set up a virtual lab for safe and effective malware analysis.

---

## Environment Overview

To safely analyze malware, we need an **isolated and disposable environment**. Here is what you will need:

| **Tool**                      | **Purpose**                              | **Example**        |
| ----------------------------- | ---------------------------------------- | ------------------ |
| **Virtualization Software**   | Create isolated environments             | VMware, VirtualBox |
| **Target System**             | A virtual machine for test the malware   | Windows, Linux     |
| **Analysis Tools**            | Inspect binaries without execution       | DIE, Ghidra        |
| **Reverse Engineering Tools** | Disassemble or decompile binaries        | Ghidra, IDA Free   |
| **Monitoring Tools**          | Track file, process and network behavior | Wireshark          |

---

## Step-by-Step Lab Setup

### 1. Install Virtualization Software:

**Choose one:**
- [VMWare](https://www.vmware.com/products/desktop-hypervisor/workstation-and-fusion)
- [VirtualBox](https://www.virtualbox.org/)

---

### 2. Prepare the Virtual Machine:

Choose and create a Virtual Machine depending on the **[analysis](type-of-analysis.md#type-of-analysis)** objective:

**Windows:**
- [Windows 10](https://www.microsoft.com/en-us/evalcenter/download-windows-10-enterprise)

**Linux:**
- [Ubuntu Desktop](https://ubuntu.com/download/desktop)
- [Ubuntu Mini ISO (24.x)](https://cdimage.ubuntu.com/ubuntu-mini-iso/noble/daily-live/current/)
- [Ubuntu Mini ISO (25.x)](https://cdimage.ubuntu.com/ubuntu-mini-iso/daily-live/current/)

I found a lightweight Ubuntu image file during a mini project in another subject, and I thought it would be useful to share it here.

---

### 3. Install Analysis Tools Inside the VM:

**Example:**
- [DIE](https://github.com/horsicq/Detect-It-Easy)
- [Ghidra](https://github.com/NationalSecurityAgency/ghidra)
- [IDA Free](https://hex-rays.com/ida-free)
- [Wireshark](https://www.wireshark.org/)

You may also need other tools for scripting, analysis tasks, decoding obfuscated payloads or etc.

**Extract tools:**
- [7z](https://www.7-zip.org/)

---

### 4. Take a Snapshot:

Before analyzing any malware:

- Take a snapshot and named it "V1.0"
- Give a brief description (very super useful for me)

Snapshot captures VM current state, including its memory, disk data, and setting. Useful for revert back if any error happen or as a checkpoint.

--- 

### 5. Isolate Networking:

Disconnect the Network Adapter after not use and never use Bridged Mode.

